<div class="container mt-5">
  <h2 class="text-center mb-5 animated-heading">Nos Offres d'Emploi</h2>

  <!-- Barre de recherche améliorée -->
  <div class="search-container mb-4">
    <input
      class="form-control search-bar"
      type="text"
      [(ngModel)]="searchTerm"
      (ngModelChange)="onSearch()"
      placeholder="Rechercher une offre d'emploi..."
    />
    <i class="fas fa-search search-icon"></i>
  </div>

  <!-- Message si aucune offre n'est disponible -->
  <div *ngIf="filteredOffres.length === 0" class="alert alert-warning text-center">
    Aucune offre d'emploi disponible.
  </div>

  <!-- Liste des offres -->
  <div class="list-group">
    <div *ngFor="let offre of filteredOffres | paginate: { itemsPerPage: 5, currentPage: p }" class="list-group-item mb-3 shadow-sm hover-effect">
      <div class="d-flex justify-content-between align-items-center">
        <h5 class="card-title text-primary d-flex align-items-center">
          <i class="fas fa-briefcase mr-3"></i>
          {{ offre.titre }}
          <!-- Ajout du badge pour le nombre de candidatures -->
          <span class="badge bg-warning text-dark ml-2">
            <i class="fas fa-users"></i> {{ offre.nombreCandidatures }} Candidature{{ offre.nombreCandidatures !== 1 ? 's' : '' }}
          </span>
        </h5>
        <div>
          <button class="btn btn-info btn-sm mr-2" (click)="openDetails(offre.id)">
            Détails
          </button>
          <button class="btn btn-success btn-sm" (click)="postuler(offre.id)">
            <i class="fas fa-paper-plane"></i> Postuler
          </button>
        </div>
      </div>
      <p class="card-text"><i class="fas fa-map-marker-alt"></i> <strong>Catégorie:</strong> {{ offre.categorie }}</p>
      <p class="card-text"><i class="fas fa-location-arrow"></i> <strong>Localisation:</strong> {{ offre.localisation }}</p>
      <p class="card-text"><i class="fas fa-euro-sign"></i> <strong>Salaire:</strong> {{ offre.salaireMin }} - {{ offre.salaireMax }} €</p>
      <p class="card-text"><i class="fas fa-file-contract"></i> <strong>Type de contrat:</strong> {{ offre.typeContrat }}</p>
      <p class="card-text"><i class="fas fa-cogs"></i> <strong>Compétences:</strong> {{ offre.competencesRequises }}</p>
    </div>
  </div>

  <!-- Pagination -->
  <pagination-controls (pageChange)="p = $event"></pagination-controls>
</div>