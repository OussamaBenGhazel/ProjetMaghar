<div class="container mt-5">
  <div class="card shadow-lg border-0 rounded-3 p-4">
    <h2 class="text-center text-primary mb-4">
      <i class="fas fa-file-signature"></i> Formulaire de Candidature
    </h2>

    <form [formGroup]="candidatureForm" (ngSubmit)="onSubmit()" enctype="multipart/form-data">
      <div class="mb-3">
        <label for="nom" class="form-label"><i class="fas fa-user"></i> Nom</label>
        <input id="nom" formControlName="nom" class="form-control" type="text" required placeholder="Votre nom complet"/>
        <div *ngIf="candidatureForm.get('nom')?.invalid && candidatureForm.get('nom')?.touched" class="text-danger">
          Le nom est requis.
        </div>
      </div>

      <div class="mb-3">
        <label for="email" class="form-label"><i class="fas fa-envelope"></i> Email</label>
        <input id="email" formControlName="email" class="form-control" type="email" required placeholder="exemple@email.com"/>
        <div *ngIf="candidatureForm.get('email')?.invalid && candidatureForm.get('email')?.touched" class="text-danger">
          Veuillez entrer un email valide.
        </div>
      </div>

      <div class="mb-3">
        <label for="cvFile" class="form-label"><i class="fas fa-file-pdf"></i> CV</label>
        <input id="cvFile" type="file" class="form-control" (change)="onFileSelected($event)" accept=".pdf,.doc,.docx" required/>
        <div *ngIf="!selectedFile && candidatureForm.touched" class="text-danger">
          Le fichier CV est requis.
        </div>
      </div>

      <div class="mb-3">
        <label for="lettreMotivation" class="form-label"><i class="fas fa-comment-dots"></i> Lettre de Motivation</label>
        <textarea id="lettreMotivation" formControlName="lettreMotivation" class="form-control" required 
          rows="4" placeholder="Expliquez pourquoi vous êtes le candidat idéal..."></textarea>
        <div *ngIf="candidatureForm.get('lettreMotivation')?.invalid && candidatureForm.get('lettreMotivation')?.touched" class="text-danger">
          La lettre de motivation est requise.
        </div>
      </div>

      <div class="text-center mt-4">
        <button type="submit" class="btn btn-success px-4 py-2" [disabled]="candidatureForm.invalid || !selectedFile">
          <i class="fas fa-paper-plane"></i> Soumettre Candidature
        </button>
      </div>

      <div *ngIf="showSuccessAlert" class="alert alert-success alert-dismissible fade show mt-3" role="alert">
        <i class="fas fa-check-circle"></i> Candidature soumise avec succès !
        <button type="button" class="btn-close" (click)="showSuccessAlert = false"></button>
      </div>
      <div *ngIf="showErrorAlert" class="alert alert-danger alert-dismissible fade show mt-3" role="alert">
        <i class="fas fa-exclamation-triangle"></i> Erreur lors de la soumission de la candidature.
        <button type="button" class="btn-close" (click)="showErrorAlert = false"></button>
      </div>
    </form>
  </div>
</div>