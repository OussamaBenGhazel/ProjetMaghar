<div class="container mt-4">
  <h2>Créer un contrat</h2>
  <form (ngSubmit)="submitContratForm()">
    
    <!-- Informations utilisateur -->
    <div class="form-group">
      <label for="userName">Nom de l'utilisateur</label>
      <input type="text" class="form-control" id="userName" [(ngModel)]="user.nom" name="nom" readonly>
    </div>

    <div class="form-group">
      <label for="userEmail">Email de l'utilisateur</label>
      <input type="email" class="form-control" id="userEmail" [(ngModel)]="user.email" name="email" readonly>
    </div>

    <!-- Affichage du numéro de contrat généré -->
    <div class="form-group">
      <label>Numéro du contrat</label>
      <input type="text" class="form-control" [(ngModel)]="contrat.numeroContrat" name="numeroContrat" readonly>
    </div>

    <!-- Dates -->
    <div class="form-group">
      <label for="dateDebut">Date de début</label>
      <input type="date" class="form-control" id="dateDebut" 
             [ngModel]="contrat.dateDebut | date:'yyyy-MM-dd'" 
             (ngModelChange)="contrat.dateDebut = $event" name="dateDebut" required>
    </div>

    <div class="form-group">
      <label for="dateFin">Date de fin</label>
      <input type="date" class="form-control" id="dateFin" 
             [ngModel]="contrat.dateFin | date:'yyyy-MM-dd'" 
             (ngModelChange)="contrat.dateFin = $event" name="dateFin" required>
    </div>

    <!-- Zone de Signature Stylisée -->
    <div class="form-group signature-container">
      <label for="signatureCanvas">Signature</label>
      <div class="signature-box">
        <canvas #canvas id="signatureCanvas"></canvas>
        <p class="signature-placeholder">Signez ici</p>
      </div>
      <div class="signature-buttons">
        <button type="button" class="btn btn-danger" (click)="clearSignature()">Effacer</button>
        <button type="button" class="btn btn-primary" (click)="saveSignature()">Signer</button>
      </div>
    </div>

    <!-- Affichage de la signature en image -->
    <div *ngIf="contrat.signature">
      <h5>Signature enregistrée :</h5>
      <img [src]="contrat.signature" alt="Signature enregistrée" class="signature-image">
    </div>

    <button type="submit" class="btn btn-success mt-3">Créer le contrat</button>
  </form>
</div>